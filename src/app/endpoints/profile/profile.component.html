<div class="container">
  <h2>Profilul Meu</h2>

  <div *ngIf="successMessage" class="success-message">
    ✓ {{ successMessage }}
  </div>

  <div *ngIf="errorMessage" class="error-message">
    ✗ {{ errorMessage }}
  </div>

  <div *ngIf="user" class="profile-card">
    <div class="profile-header">
      <div class="avatar">
        {{ user.firstName.charAt(0) }}{{ user.lastName.charAt(0) }}
      </div>
      <div class="user-info-header">
        <h3>{{ user.firstName }} {{ user.lastName }}</h3>
        <p class="user-email">{{ user.email }}</p>
        <span *ngIf="user.role === 'admin'" class="admin-badge">Administrator</span>
      </div>
    </div>

    <div class="profile-body">
      <form *ngIf="isEditing; else viewMode">
        <div class="form-group">
          <label for="firstName">Prenume:</label>
          <input 
            type="text" 
            id="firstName" 
            name="firstName" 
            [(ngModel)]="editData.firstName"
            required
          >
        </div>

        <div class="form-group">
          <label for="lastName">Nume:</label>
          <input 
            type="text" 
            id="lastName" 
            name="lastName" 
            [(ngModel)]="editData.lastName"
            required
          >
        </div>

        <div class="form-group">
          <label for="phone">Telefon:</label>
          <input 
            type="tel" 
            id="phone" 
            name="phone" 
            [(ngModel)]="editData.phone"
            placeholder="+373 69 123 456"
          >
        </div>

        <div class="form-group">
          <label for="address">Adresă:</label>
          <input 
            type="text" 
            id="address" 
            name="address" 
            [(ngModel)]="editData.address"
            placeholder="Chișinău, str. Ștefan cel Mare 123"
          >
        </div>

        <div class="form-actions">
          <button 
            type="button" 
            (click)="saveChanges()" 
            class="btn btn-save"
            [disabled]="isSaving"
          >
            {{ isSaving ? 'Se salvează...' : 'Salvează' }}
          </button>
          <button 
            type="button" 
            (click)="toggleEdit()" 
            class="btn btn-cancel"
          >
            Anulează
          </button>
        </div>
      </form>

      <ng-template #viewMode>
        <div class="info-section">
          <div class="info-item">
            <strong>Prenume:</strong>
            <span>{{ user.firstName }}</span>
          </div>
          <div class="info-item">
            <strong>Nume:</strong>
            <span>{{ user.lastName }}</span>
          </div>
          <div class="info-item">
            <strong>Email:</strong>
            <span>{{ user.email }}</span>
          </div>
          <div class="info-item">
            <strong>Telefon:</strong>
            <span>{{ user.phone || 'Nu este setat' }}</span>
          </div>
          <div class="info-item">
            <strong>Adresă:</strong>
            <span>{{ user.address || 'Nu este setată' }}</span>
          </div>
        </div>

        <div class="profile-actions">
          <button (click)="toggleEdit()" class="btn btn-edit">
            Editează Profil
          </button>
          <button (click)="logout()" class="btn btn-logout">
            Deconectare
          </button>
        </div>
      </ng-template>
    </div>
  </div>

  <div class="back-container">
    <button routerLink="/" class="back-btn">← Înapoi la Home</button>
  </div>
</div>